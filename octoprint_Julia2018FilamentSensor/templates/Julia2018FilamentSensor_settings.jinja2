<div id="settings_j18fs">
    <h3>{{ _('Julia Filament Sensor') }}</h3>
    <hr/>
    
    <form class="form-horizontal">
        <div> {# General settings #}
            <div data-bind="visible: !showGeneral()">
                <label data-bind="click: toggleGeneral" >
                    <h5><i class="icon-chevron-right icon-fixed-width"></i>General</h5>
                </label>
            </div>

            <div data-bind="visible: showGeneral">
                <label data-bind="click: toggleGeneral" >
                    <h5><i class="icon-chevron-down icon-fixed-width"></i>General</h5>
                </label>

                {# 
                <div class="control-group">
                    <label class="control-label">{{ _('GPIO Mode') }}</label>
                    <div class="controls">
                        <input type="text" class="input" data-bind="value: (Config.mode() > 0 ? 'BCM' : 'Board')" readonly>
                        {# <select class="select-mini" data-bind="value: Config.mode">
                            <option value=0>{{ _('Board Mode') }}</option>
                            <option value=1>{{ _('BCM Mode') }}</option>
                        </select> 
                    </div>
                </div> 
                #}

                <div class="control-group">
                    <label class="control-label">{{ _('Pause on trigger') }}</label>
                    <div class="controls">
                        {# <label class="checkbox">
                            <input type="checkbox" data-bind="checked: Config.pause_print"> {{ _('Pause print when out of filament') }}
                        </label> #}
                        <select class="select-mini" data-bind="value: Config.pause_print">
                            <option value=0>{{ _('Disabled') }}</option>
                            <option value=1>{{ _('Enabled') }}</option>
                        </select>
                    </div>
                </div>

            </div>

            <hr/>
        </div> {# General settings #}

        <div> {# Extruder 0 #}
            <div data-bind="visible: !showExtruder0()">
                <label data-bind="click: toggleExtruder0" >
                    <h5><i class="icon-chevron-right icon-fixed-width"></i>Extruder 0</h5>
                </label>
            </div>

            <div data-bind="visible: showExtruder0">
                <label data-bind="click: toggleExtruder0" >
                    <h5><i class="icon-chevron-down icon-fixed-width"></i>Extruder 0</h5>
                </label>

                <div class="control-group">
                    <label class="control-label">{{ _("Sensor state") }}</label>
                    <div class="controls">
                        {# <input type="text" class="input" data-bind="value: (Config.pin < 0 ? 'Not Configured' : Config.pin)" readonly> #}
                        <select class="select-mini" data-bind="value: Config.enabled_extruder0">
                            <option value=0>{{ _('Disabled') }}</option>
                            <option value=1>{{ _('Enabled') }}</option>
                        </select>
                    </div>
                </div>

                <div data-bind="visible: showExtruder0Config">
                    <div class="control-group">
                        <label class="control-label">{{ _('Contact debounce time') }}</label>
                        <div class="controls" data-toggle="tooltip" title="{{ _('Delay between consecutive state changes') }}">
                            <input type="number" step="any" min="0" class="input" data-bind="value: Config.bounce_extruder0">
                            <span class="add-on">ms</span>
                            <span class="help-block">{{ _('Delay between consecutive state changes') }}</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">{{ _('Contact type') }}</label>
                        <div class="controls">
                            <select class="select-mini" data-bind="value: Config.contact_extruder0">
                                {# value - state when filament is present  #}
                                <option value=0>{{ _('Normally Closed (NC)') }}</option>
                                <option value=1>{{ _('Normally Open (NO)') }}</option>
                            </select>
                            <span class="help-block">{{ _('NC - HIGH, NO - LOW when filament is not present') }}</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">{{ _('Post-trigger gcode') }}</label>
                        <div class="controls">
                            <input type="text" class="input-block-level" data-bind="value: Config.gcode_extruder0">
                            <span class="help-block">{{ _('Gcode commands which will be run when Extruder 0 is out of filament. Separate multi commands with a semi colon.') }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <hr/>
        </div> {# Extruder 0 #}

        <div data-bind="visible: hasExtruder1"> {# Extruder 1 #}
            <div data-bind="visible: !showExtruder1()">
                <label data-bind="click: toggleExtruder1" >
                    <h5><i class="icon-chevron-right icon-fixed-width"></i>Extruder 1</h5>
                </label>
            </div>

            <div data-bind="visible: showExtruder1">
                <label data-bind="click: toggleExtruder1" >
                    <h5><i class="icon-chevron-down icon-fixed-width"></i>Extruder 1</h5>
                </label>

                <div class="control-group">
                    <label class="control-label">{{ _('Sensor state') }}</label>
                    <div class="controls">
                        <select class="select-mini" data-bind="value: Config.enabled_extruder1">
                            <option value=0>{{ _('Disabled') }}</option>
                            <option value=1>{{ _('Enabled') }}</option>
                        </select>
                    </div>
                </div>
                <div data-bind="visible: showExtruder1Config">
                    <div class="control-group">
                        <label class="control-label">{{ _('Contact debounce time') }}</label>
                        <div class="controls" data-toggle="tooltip" title="{{ _('Delay between consecutive state changes') }}">
                            <input type="number" step="any" min="0" class="input" data-bind="value: Config.bounce_extruder1">
                            <span class="add-on">ms</span>
                            <span class="help-block">{{ _('Delay between consecutive state changes') }}</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">{{ _('Contact type') }}</label>
                        <div class="controls">
                            <select class="select-mini" data-bind="value: Config.contact_extruder1">
                                {# value - state when filament is present  #}
                                <option value=0>{{ _('Normally Closed (NC)') }}</option>
                                <option value=1>{{ _('Normally Open (NO)') }}</option>
                            </select>
                            <span class="help-block">{{ _('NC - HIGH, NO - LOW when filament is not present') }}</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">{{ _('Post-trigger gcode') }}</label>
                        <div class="controls">
                            <input type="text" class="input-block-level" data-bind="value: Config.gcode_extruder1">
                            <span class="help-block">{{ _('Gcode commands which will be run when Extruder 1 is out of filament. Separate multi commands with a semi colon.') }}</span>
                        </div>
                    </div>
                </div>
            </div>
            <hr/>
        </div> {# Extruder 1 #}

        <div> {# Door #}
            <div data-bind="visible: !showDoor()">
                <label data-bind="click: toggleDoor" >
                    <h5><i class="icon-chevron-right icon-fixed-width"></i>Door</h5>
                </label>
            </div>

            <div data-bind="visible: showDoor">
                <label data-bind="click: toggleDoor" >
                    <h5><i class="icon-chevron-down icon-fixed-width"></i>Door</h5>
                </label>

                <div class="control-group">
                    <label class="control-label">{{ _('Sensor state') }}</label>
                    <div class="controls">
                        {# <input type="text" class="input" data-bind="value: (Config.pin < 0 ? 'Not Configured' : Config.pin)" readonly> #}
                        <select class="select-mini" data-bind="value: Config.enabled_door">
                            <option value=0>{{ _('Disabled') }}</option>
                            <option value=1>{{ _('Enabled') }}</option>
                        </select>
                    </div>
                </div>

                <div data-bind="visible: showDoorConfig">
                    <div class="control-group">
                        <label class="control-label">{{ _('Contact debounce time') }}</label>
                        <div class="controls" data-toggle="tooltip" title="{{ _('Delay between consecutive state changes') }}">
                            <input type="number" step="any" min="0" class="input" data-bind="value: Config.bounce_door">
                            <span class="add-on">ms</span>
                            <span class="help-block">{{ _('Delay between consecutive state changes') }}</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">{{ _('Contact type') }}</label>
                        <div class="controls">
                            <select class="select-mini" data-bind="value: Config.contact_door">
                                {# value - state when filament is present  #}
                                <option value=0>{{ _('Normally Closed (NC)') }}</option>
                                <option value=1>{{ _('Normally Open (NO)') }}</option>
                            </select>
                            <span class="help-block">{{ _('NC - HIGH, NO - LOW when door is open') }}</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">{{ _('Post-trigger gcode') }}</label>
                        <div class="controls">
                            <input type="text" class="input-block-level" data-bind="value: Config.gcode_door">
                            <span class="help-block">{{ _('Gcode commands which will be run when the door is open. Separate multi commands with a semi colon.') }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <hr/>
        </div> {# Door #}

    </form>

    <div class="align-right">
        <button class="btn btn-info" data-bind="click: testStatus">Test Status</button>
    </div>
</div>